import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as p}from"./index.DiEladB3.js";import{a as M,s as _}from"./cart.DLN6Tch6.js";import{P as D}from"./PaymentIcons.B5hD3Hx-.js";import{A as $}from"./AffirmPromotionalMessage.D8TcFvn3.js";import"./index.Dpt-qeBV.js";import"./index.daetGfa_.js";function q({images:s,videoUrl:i}){const[a,d]=p.useState(0),l=p.useRef(null),o=(s||[]).filter((r,t,f)=>f.findIndex(g=>g.url===r.url)===t),m=i?[...o.slice(0,1),{type:"video",url:i},...o.slice(1)]:o,x=r=>{if(d(r),l.current){const t=l.current.offsetWidth;l.current.scrollTo({left:r*t,behavior:"smooth"})}},h=()=>{if(l.current){const r=l.current.offsetWidth,t=Math.round(l.current.scrollLeft/r);d(t)}};return e.jsxs("div",{className:"flex flex-col gap-4 relative",children:[e.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2 aspect-square relative bg-[#111] overflow-hidden rounded-sm border border-white/5",children:m[a]?.type==="video"?e.jsx("video",{src:i,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}):e.jsx("img",{src:m[a]?.url||"",alt:m[a]?.altText||"Detalle de Joya",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"col-span-2 grid grid-cols-5 gap-4",children:m.map((r,t)=>e.jsx("button",{onClick:()=>d(t),className:`aspect-square overflow-hidden rounded-sm bg-[#111] border ${a===t?"border-[#d4af37]":"border-white/10 hover:border-white/30"} transition-all`,children:r.type==="video"?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black relative",children:e.jsx("span",{className:"material-symbols-outlined text-white text-2xl z-10",children:"play_circle"})}):e.jsx("img",{src:r.url,alt:r.altText||`Thumbnail ${t}`,className:"w-full h-full object-cover"})},t))})]}),e.jsxs("div",{className:"lg:hidden relative",children:[e.jsx("div",{ref:l,onScroll:h,className:"flex overflow-x-auto snap-x snap-mandatory scrollbar-hide aspect-[4/5]",children:m.map((r,t)=>e.jsx("div",{className:"min-w-full snap-center relative bg-[#050505]",children:r?.type==="video"?e.jsx("video",{src:i,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}):e.jsx("img",{src:r?.url||"",alt:r?.altText||"Detalle",className:"w-full h-full object-cover"})},t))}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-2 z-10",children:m.map((r,t)=>e.jsx("button",{onClick:()=>x(t),className:`w-2 h-2 rounded-full transition-all ${a===t?"bg-[#d4af37] w-4":"bg-white/30"}`,"aria-label":`Ver imagen ${t+1}`},t))})]})]})}function L(){return e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-y-3 gap-x-6 py-4 border-b border-white/5 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"material-symbols-outlined text-[#d4af37] text-lg",children:"verified"}),e.jsx("span",{className:"text-[10px] md:text-xs text-[#FAFAF5]/80 uppercase tracking-wide font-bold",children:"Oro Real"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"material-symbols-outlined text-[#d4af37] text-lg",children:"local_shipping"}),e.jsx("span",{className:"text-[10px] md:text-xs text-[#FAFAF5]/80 uppercase tracking-wide font-bold",children:"Envío Gratis"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"material-symbols-outlined text-[#d4af37] text-lg",children:"star"}),e.jsx("span",{className:"text-[10px] md:text-xs text-[#FAFAF5]/80 uppercase tracking-wide font-bold",children:"5.0 Estrellas"})]})]})}function R(){return e.jsxs("div",{className:"mb-6 bg-white/5 p-4 rounded-sm border border-white/10",children:[e.jsxs("div",{className:"flex text-[#d4af37] mb-2 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"star"}),e.jsx("span",{className:"material-symbols-outlined text-sm",children:"star"}),e.jsx("span",{className:"material-symbols-outlined text-sm",children:"star"}),e.jsx("span",{className:"material-symbols-outlined text-sm",children:"star"}),e.jsx("span",{className:"material-symbols-outlined text-sm",children:"star"})]}),e.jsx("p",{className:"text-sm italic text-[#FAFAF5]/90 mb-2 font-serif",children:'"La pieza más exquisita de mi colección. El brillo del oro es impresionante y el envío fue súper rápido."'}),e.jsxs("p",{className:"text-xs text-[#FAFAF5]/50 font-bold uppercase tracking-widest",children:["— Elena V. ",e.jsx("span",{className:"text-[#d4af37] ml-1",children:"Verificado"})]})]})}function G({productTitle:s,price:i,compareAtPrice:a,image:d,isSoldOut:l,onAddToCart:u,mainButtonId:o="main-add-to-cart"}){const[m,x]=p.useState(!1);return p.useEffect(()=>{const h=document.getElementById(o);if(!h)return;const r=new IntersectionObserver(([t])=>{!t.isIntersecting&&t.boundingClientRect.top<0?x(!0):x(!1)},{threshold:0});return r.observe(h),()=>r.disconnect()},[o]),m?e.jsx("div",{className:"fixed bottom-[64px] lg:bottom-0 left-0 right-0 bg-white border-t border-[#d4af37]/20 p-4 z-50 animate-slide-up shadow-[0_-4px_20px_rgba(0,0,0,0.1)]",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[d&&e.jsx("img",{src:d,alt:s,className:"w-10 h-10 object-cover rounded-sm border border-gray-200"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-black font-serif text-sm truncate max-w-[200px]",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-[#bfa15f] text-xs font-bold",children:["$",i.toLocaleString()]}),a&&a>i&&e.jsxs("span",{className:"text-gray-400 text-xs line-through decoration-gray-400",children:["$",a.toLocaleString()]})]})]})]}),e.jsx("div",{className:"md:hidden flex flex-col",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-black text-sm font-bold",children:["$",i.toLocaleString()]}),a&&a>i&&e.jsxs("span",{className:"text-gray-400 text-xs line-through decoration-gray-400",children:["$",a.toLocaleString()]})]})}),e.jsx("button",{onClick:u,disabled:l,className:`flex-1 md:flex-none md:w-64 py-3 uppercase font-bold text-xs tracking-[2px] transition-all 
            ${l?"bg-gray-800 text-gray-400 cursor-not-allowed":"bg-[#d4af37] text-black hover:bg-white"}`,children:l?"Agotado":"Agregar al Carrito"})]})}):null}function H({product:s,variants:i,selectedVariant:a,onVariantChange:d,livePriceLoading:l=!1}){const[u,o]=p.useState(!1),m=a.selectedOptions[0]?.name||"Talla",x=Array.from(new Set(i.map(f=>f.selectedOptions[0]?.value))).filter(Boolean),h=()=>{o(!0),M({id:a.id,title:s.title,price:parseFloat(a.price.amount),image:s.featuredImage?.url||"",handle:s.handle,variantTitle:a.title,quantity:1}),setTimeout(()=>{o(!1),_(!0)},600)},r=parseFloat(a.price.amount),t=!a.availableForSale||a.quantityAvailable!==void 0&&a.quantityAvailable<=0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center md:items-start text-center md:text-left",children:[e.jsx("span",{className:"text-[#d4af37] text-[10px] md:text-xs font-bold uppercase tracking-[2px] mb-2 block animate-fade-in",children:s.vendor||"DTalles Gold Collection"}),e.jsx("h1",{className:"text-2xl md:text-5xl font-serif text-white mb-2 leading-tight break-words",children:s.title}),e.jsxs("div",{className:"flex flex-col items-center md:items-start gap-2 mb-6",children:[e.jsxs("div",{className:"flex items-baseline gap-4 flex-wrap justify-center md:justify-start",children:[e.jsxs("span",{className:"text-3xl md:text-5xl font-serif text-[#d4af37] break-words",children:["$",r.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})]}),l&&e.jsx("span",{className:"text-xs text-gray-400 font-sans animate-pulse","aria-live":"polite",children:"Actualizando precio…"}),a.compareAtPrice&&parseFloat(a.compareAtPrice.amount)>r&&e.jsxs("div",{className:"flex flex-col items-start leading-none",children:[e.jsxs("span",{className:"text-lg md:text-xl text-gray-400 line-through decoration-red-500/60 decoration-2",children:["$",parseFloat(a.compareAtPrice.amount).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})]}),e.jsxs("span",{className:"bg-red-600 text-white text-[10px] md:text-xs font-bold px-2 py-0.5 rounded-sm uppercase tracking-wider mt-1 animate-pulse-slow",children:["Ahorras ",Math.round((parseFloat(a.compareAtPrice.amount)-r)/parseFloat(a.compareAtPrice.amount)*100),"%"]})]})]}),s.pesoReal?.value&&e.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["~$",(r/parseFloat(s.pesoReal.value)).toLocaleString("en-US",{maximumFractionDigits:0}),"/gr (Oro Sólido)"]}),e.jsx($,{price:r,pageType:"product",className:"mb-0 mt-1"})]}),e.jsx(L,{}),e.jsx(R,{}),e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-xs text-gray-400 bg-white/5 px-3 py-1.5 rounded-full border border-white/5",children:[e.jsxs("span",{className:"flex h-2 w-2 relative",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-orange-600"})]}),e.jsxs("span",{className:"font-medium",children:[e.jsx("span",{className:"text-orange-400 font-bold",children:Math.floor(Math.random()*15+8)})," personas viendo esta joya ahora mismo"]})]}),a.quantityAvailable!==void 0&&a.quantityAvailable>0&&a.quantityAvailable<5&&e.jsxs("div",{className:"mb-4 inline-flex items-center gap-2 text-xs font-bold text-[#d4af37] bg-[#d4af37]/10 px-3 py-1.5 rounded-full animate-pulse-slow",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#d4af37]"}),"Solo quedan ",a.quantityAvailable," piezas"]})]}),x.length>0&&x[0]!=="Default Title"&&e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-400 text-xs uppercase tracking-widest mb-3 block",children:["Selecciona ",m,": ",e.jsx("span",{className:"text-white font-bold",children:a.selectedOptions[0]?.value})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(f=>{const g=i.find(b=>b.selectedOptions[0]?.value===f),y=g?.availableForSale,j=a.selectedOptions[0]?.value===f;return e.jsx("button",{onClick:()=>g&&d(g),className:`w-12 h-12 rounded-full flex items-center justify-center border text-sm font-medium transition-all relative ${j?"border-[#d4af37] bg-[#d4af37] text-black shadow-[0_0_15px_rgba(212,175,55,0.4)]":"border-white/20 text-gray-400 hover:border-white/60 hover:text-white"} ${y?"":"opacity-50 cursor-not-allowed line-through decoration-white/50"}`,children:f},f)})})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{id:"main-add-to-cart",onClick:h,disabled:t||u,className:`w-full py-5 uppercase font-bold tracking-[2px] transition-all flex items-center justify-center gap-3 ${t?"bg-gray-800 text-gray-400 cursor-not-allowed border border-transparent":"bg-[#d4af37] text-black border border-[#d4af37] hover:bg-white hover:border-white shadow-[0_0_20px_rgba(212,175,55,0.2)]"}`,children:u?e.jsx("span",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):t?"Agotado - Avísame":"Agregar a la Bolsa"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"}),e.jsx("span",{children:"Pago 100% Seguro y Encriptado"})]}),e.jsx(D,{className:"flex flex-wrap justify-center gap-2 opacity-80",iconClassName:"h-5 w-auto"})]})]}),e.jsx(G,{productTitle:s.title,price:r,compareAtPrice:a.compareAtPrice?parseFloat(a.compareAtPrice.amount):void 0,image:s.featuredImage?.url||"",isSoldOut:t,onAddToCart:h})]})}function z({details:s}){const[i,a]=p.useState("specs"),d=l=>{a(i===l?null:l)};return e.jsxs("div",{className:"border-t border-white/10 pt-6",children:[e.jsx("h2",{className:"text-lg font-serif text-[#FAFAF5] mb-6 italic",children:"Transparencia en los Detalles"}),e.jsxs("div",{className:"max-w-3xl mx-auto flex flex-col divide-y divide-white/10",children:[e.jsxs("div",{className:"group",children:[e.jsxs("button",{onClick:()=>d("specs"),className:"w-full py-6 flex justify-between items-center text-left hover:text-[#d4af37] transition-colors",children:[e.jsx("span",{className:"text-sm font-bold uppercase tracking-widest text-[#FAFAF5]",children:"Ficha Técnica"}),e.jsx("span",{className:`material-symbols-outlined transition-transform duration-300 ${i==="specs"?"rotate-180 text-[#d4af37]":"text-gray-500"}`,children:"expand_more"})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${i==="specs"?"max-h-[800px] opacity-100 pb-6":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"grid grid-cols-2 gap-y-6 gap-x-8 text-sm",children:[s.vendor&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"PROVEEDOR"}),e.jsx("span",{className:"text-white font-medium",children:s.vendor})]}),s.collections&&s.collections.length>0&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"COLECCIÓN"}),e.jsx("span",{className:"text-white font-medium",children:s.collections.join(", ")})]}),s.productType&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"CATEGORÍA"}),e.jsx("span",{className:"text-white font-medium",children:s.productType})]}),s.design&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"DISEÑO"}),e.jsx("span",{className:"text-white font-medium",children:s.design})]}),s.color&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"COLOR"}),e.jsx("span",{className:"text-white font-medium",children:s.color})]}),s.gender&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"GÉNERO OBJETIVO"}),e.jsx("span",{className:"text-white font-medium",children:s.gender})]}),s.ageGroup&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"GRUPO DE EDAD"}),e.jsx("span",{className:"text-white font-medium",children:s.ageGroup})]}),s.material&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"MATERIAL"}),e.jsx("span",{className:"text-white font-medium",children:s.material})]}),s.weight&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"PESO APROX."}),e.jsxs("span",{className:"text-white font-medium",children:[s.weight," g"]})]}),s.width&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-1",children:"ANCHO"}),e.jsxs("span",{className:"text-white font-medium",children:[s.width," mm"]})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-col col-span-2",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase mb-2",children:"ETIQUETAS"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(l=>e.jsx("span",{className:"px-2 py-1 bg-white/5 border border-white/10 rounded text-xs text-gray-300",children:l},l))})]})]})})]}),e.jsxs("div",{className:"group",children:[e.jsxs("button",{onClick:()=>d("faq"),className:"w-full py-6 flex justify-between items-center text-left hover:text-[#d4af37] transition-colors",children:[e.jsx("span",{className:"text-sm font-bold uppercase tracking-widest text-[#FAFAF5]",children:"Preguntas Frecuentes"}),e.jsx("span",{className:`material-symbols-outlined transition-transform duration-300 ${i==="faq"?"rotate-180 text-[#d4af37]":"text-gray-500"}`,children:"expand_more"})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${i==="faq"?"max-h-[800px] opacity-100 pb-6":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"space-y-6 text-sm text-gray-400 font-light leading-relaxed",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"¿Es oro sólido real?"}),e.jsx("p",{children:'Sí. En DTalles solo vendemos oro 10k y 14k garantizado. No vendemos chapado (gold plating) ni "oro laminado". Tu joya es una inversión real que mantiene su valor.'})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"¿Cómo sé mi talla?"}),e.jsx("p",{children:'Para cadenas: 20" y 22" son las medidas estándar para hombre. Para anillos, recomendamos medir el diámetro interior de un anillo que ya uses o visitar una joyería local para una medición exacta.'})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Envíos y Devoluciones"}),e.jsx("p",{children:"Enviamos asegurado a todo USA en 2-4 días hábiles. Si no te convence, tienes 30 días para devolverlo sin preguntas (la pieza debe estar intacta)."})]})]})})]})]}),s.descriptionHtml?e.jsx("div",{className:"mt-8 max-w-3xl mx-auto px-4 md:px-0",children:e.jsx("div",{className:`prose prose-sm prose-invert text-gray-400 max-w-none overflow-x-auto\r
                        [&_img]:max-w-full [&_img]:h-auto [&_img]:rounded-lg\r
                        [&_iframe]:max-w-full [&_table]:w-full [&_table]:block [&_table]:overflow-x-auto`,dangerouslySetInnerHTML:{__html:s.descriptionHtml}})}):null]})}const J=`
  query getProductLivePricing($id: ID!) {
    product(id: $id) {
      id
      title
      descriptionHtml
      vendor
      tags
      productType
      
      pesoReal: metafield(namespace: "custom", key: "peso_real") { value type }
      anchoMm: metafield(namespace: "custom", key: "ancho_mm") { value type }
      material: metafield(namespace: "custom", key: "material") { value type }
      
      shopifyColor: metafield(namespace: "shopify", key: "color-pattern") {
        value
        reference { ... on Metaobject { fields { key value } } }
        references(first: 10) { nodes { ... on Metaobject { fields { key value } } } }
      }
      shopifyAgeGroup: metafield(namespace: "shopify", key: "age-group") {
        value
        reference { ... on Metaobject { fields { key value } } }
        references(first: 10) { nodes { ... on Metaobject { fields { key value } } } }
      }
      shopifyGender: metafield(namespace: "shopify", key: "target-gender") {
        value
        reference { ... on Metaobject { fields { key value } } }
        references(first: 10) { nodes { ... on Metaobject { fields { key value } } } }
      }
      shopifyMaterial: metafield(namespace: "shopify", key: "jewelry-material") {
        value
        reference { ... on Metaobject { fields { key value } } }
        references(first: 10) { nodes { ... on Metaobject { fields { key value } } } }
      }
      shopifyJewelryType: metafield(namespace: "shopify", key: "jewelry-type") {
        value
        reference { ... on Metaobject { fields { key value } } }
        references(first: 10) { nodes { ... on Metaobject { fields { key value } } } }
      }
      shopifyNecklaceDesign: metafield(namespace: "shopify", key: "necklace-design") {
        value
        reference { ... on Metaobject { fields { key value } } }
        references(first: 10) { nodes { ... on Metaobject { fields { key value } } } }
      }

      variants(first: 50) {
        edges {
          node {
            id
            title
            sku
            availableForSale
            quantityAvailable
            price { amount currencyCode }
            compareAtPrice { amount currencyCode }
            selectedOptions { name value }
          }
        }
      }
    }
  }
`;function U(){return{url:"https://dtalles-jewelry.myshopify.com/api/2025-10/graphql.json",token:"851965f8a7e17cf35de22fdcbe44c100"}}async function B(s){const i=U();if(!i)return null;try{const a=await fetch(`${i.url}?nocache=${Date.now()}`,{method:"POST",cache:"no-store",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":i.token,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},body:JSON.stringify({query:J,variables:{id:s}})});if(!a.ok)return null;const l=(await a.json())?.data?.product;return l?.variants?.edges?{variants:l.variants.edges.map(o=>({id:o.node.id,title:o.node.title,sku:o.node.sku??null,availableForSale:o.node.availableForSale,quantityAvailable:o.node.quantityAvailable??null,price:o.node.price,compareAtPrice:o.node.compareAtPrice??null,selectedOptions:o.node.selectedOptions??[]})),title:l.title,descriptionHtml:l.descriptionHtml,vendor:l.vendor,tags:l.tags,productType:l.productType,pesoReal:l.pesoReal,anchoMm:l.anchoMm,material:l.material,shopifyColor:l.shopifyColor,shopifyAgeGroup:l.shopifyAgeGroup,shopifyGender:l.shopifyGender,shopifyMaterial:l.shopifyMaterial,shopifyJewelryType:l.shopifyJewelryType,shopifyNecklaceDesign:l.shopifyNecklaceDesign}:null}catch{return null}}function ee({product:s}){const i=s.variants.edges.map(n=>n.node),[a,d]=p.useState(null),[l,u]=p.useState(!0),o=a?.variants??i,[m,x]=p.useState(i[0]);p.useEffect(()=>{if(!s?.id){u(!1);return}u(!0),B(s.id).then(n=>{n&&d(n),u(!1)})},[s.id]),p.useEffect(()=>{if(a?.variants){const n=a.variants.find(v=>v.title===m.title||v.sku&&v.sku===m.sku);n&&x(n)}},[a]);const h=n=>{x(n)},r=n=>{if(!n)return;const v=c=>{if(c&&c.fields){const w=c.fields.find(k=>k.key==="label"||k.key==="name");if(w)return w.value;if(c.fields.length>0)return c.fields[0].value}return null};if(n.reference){const c=v(n.reference);if(c)return c}if(n.references&&n.references.nodes&&n.references.nodes.length>0){const c=n.references.nodes.map(v).filter(Boolean);if(c.length>0)return c.join(", ")}if(n.value&&(n.value.startsWith("[")||n.value.startsWith("{")))try{const c=JSON.parse(n.value);if(Array.isArray(c))return c.join(", ")}catch{}if(!(typeof n.value=="string"&&n.value.startsWith("gid://")))return n.value},t=n=>a&&a[n]!==void 0?a[n]:s[n],f=r(t("shopifyMaterial"))||r(t("material")),g=r(t("shopifyColor")),y=r(t("shopifyAgeGroup")),j=r(t("shopifyGender")),b=r(t("shopifyNecklaceDesign")),A=r(t("shopifyJewelryType")),F=t("vendor"),S=t("tags"),T=t("descriptionHtml"),C=t("productType"),P=s.productCategory?.productTaxonomyNode?.name||s.category?.name||A||C,E={material:f,weight:t("pesoReal")?.value,width:t("anchoMm")?.value,descriptionHtml:T,vendor:F,tags:S,productType:P,collections:s.collections?.edges?.map(n=>n.node.title),color:g,ageGroup:y,gender:j,design:b},I=t("title")||s.title,N=s.images.edges.map(n=>n.node),O=N[0]?.url;return e.jsxs("div",{className:"pb-32 lg:pb-0",children:[" ",e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[40%_60%] lg:gap-16 items-start",children:[e.jsx("div",{className:"w-full lg:max-w-[500px] lg:mx-auto lg:sticky lg:top-[300px] lg:self-start max-h-[calc(100vh-320px)] overflow-y-auto hide-scrollbar",children:e.jsx(q,{images:N,videoUrl:s.videoUrl?.value})}),e.jsxs("div",{className:"mt-8 lg:mt-0 px-4 lg:px-0 flex flex-col gap-8",children:[e.jsx(H,{product:{...s,title:I,featuredImage:{url:O}},variants:o,selectedVariant:m,onVariantChange:h,livePriceLoading:l}),e.jsx(z,{details:E})]})]})]})}export{ee as default};
