import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as x}from"./index.DiEladB3.js";import"./favorites.BAdUhc2r.js";import{P as A}from"./ProductCard._MmZUSfC.js";import"./index.Dpt-qeBV.js";import"./index.daetGfa_.js";import"./index.DIEz7UgV.js";import"./cart.DLN6Tch6.js";import"./paths.BOnPBRLc.js";function C({filters:c,selectedFilters:a,onFilterChange:m,priceRange:i,setPriceRange:y,totalProducts:n,filteredCount:g}){const[o,b]=x.useState(["category","price","collection"]),f=s=>{b(p=>p.includes(s)?p.filter(k=>k!==s):[...p,s])};return e.jsxs("aside",{className:"w-full lg:w-64 flex-shrink-0 pr-0 lg:pr-8 space-y-8 font-sans",children:[e.jsxs("div",{className:"pb-4 border-b border-[#d4af37]/20",children:[e.jsx("h3",{className:"text-[#FAFAF5] font-serif text-lg",children:"Filtros"}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Mostrando ",g," de ",n," joyas"]})]}),e.jsxs("div",{className:"border-b border-[#d4af37]/10 pb-6",children:[e.jsxs("button",{onClick:()=>f("category"),className:"flex justify-between items-center w-full mb-4 group",children:[e.jsx("span",{className:"text-[#d4af37] text-xs font-bold uppercase tracking-widest",children:"Categoría"}),e.jsx("span",{className:`material-symbols-outlined text-gray-500 group-hover:text-[#d4af37] transition-transform ${o.includes("category")?"rotate-180":""}`,children:"expand_more"})]}),o.includes("category")&&e.jsx("div",{className:"space-y-2 animate-fade-in",children:c.categories.map(s=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${a.category.includes(s)?"bg-[#d4af37] border-[#d4af37]":"border-gray-600 group-hover:border-[#d4af37]"}`,children:a.category.includes(s)&&e.jsx("span",{className:"material-symbols-outlined text-black text-[10px] font-bold",children:"check"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:a.category.includes(s),onChange:()=>m("category",s)}),e.jsx("span",{className:`text-sm ${a.category.includes(s)?"text-white":"text-gray-400"} group-hover:text-[#FAFAF5] transition-colors`,children:s})]},s))})]}),e.jsxs("div",{className:"border-b border-[#d4af37]/10 pb-6",children:[e.jsxs("button",{onClick:()=>f("price"),className:"flex justify-between items-center w-full mb-4 group",children:[e.jsx("span",{className:"text-[#d4af37] text-xs font-bold uppercase tracking-widest",children:"Precio"}),e.jsx("span",{className:`material-symbols-outlined text-gray-500 group-hover:text-[#d4af37] transition-transform ${o.includes("price")?"rotate-180":""}`,children:"expand_more"})]}),o.includes("price")&&e.jsxs("div",{className:"px-2 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-2",children:[e.jsxs("span",{children:["$",i.min]}),e.jsxs("span",{children:["$",i.max,"+"]})]}),e.jsx("input",{type:"range",min:"0",max:"5000",step:"100",value:i.max,onChange:s=>y({...i,max:parseInt(s.target.value)}),className:"w-full accent-[#d4af37] h-1 bg-gray-800 rounded-lg appearance-none cursor-pointer"}),e.jsxs("p",{className:"text-center text-[#FAFAF5] text-sm mt-2",children:["Hasta: ",e.jsxs("span",{className:"font-bold text-[#d4af37]",children:["$",i.max]})]})]})]}),e.jsxs("div",{className:"border-b border-[#d4af37]/10 pb-6",children:[e.jsxs("button",{onClick:()=>f("collection"),className:"flex justify-between items-center w-full mb-4 group",children:[e.jsx("span",{className:"text-[#d4af37] text-xs font-bold uppercase tracking-widest",children:"Colección"}),e.jsx("span",{className:`material-symbols-outlined text-gray-500 group-hover:text-[#d4af37] transition-transform ${o.includes("collection")?"rotate-180":""}`,children:"expand_more"})]}),o.includes("collection")&&e.jsx("div",{className:"space-y-2 animate-fade-in",children:c.collections.map(s=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${a.collection.includes(s)?"bg-[#d4af37] border-[#d4af37]":"border-gray-600 group-hover:border-[#d4af37]"}`,children:a.collection.includes(s)&&e.jsx("span",{className:"material-symbols-outlined text-black text-[10px] font-bold",children:"check"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:a.collection.includes(s),onChange:()=>m("collection",s)}),e.jsx("span",{className:`text-sm ${a.collection.includes(s)?"text-white":"text-gray-400"} group-hover:text-[#FAFAF5] transition-colors`,children:s})]},s))})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>f("material"),className:"flex justify-between items-center w-full mb-4 group",children:[e.jsx("span",{className:"text-[#d4af37] text-xs font-bold uppercase tracking-widest",children:"Material"}),e.jsx("span",{className:`material-symbols-outlined text-gray-500 group-hover:text-[#d4af37] transition-transform ${o.includes("material")?"rotate-180":""}`,children:"expand_more"})]}),o.includes("material")&&e.jsx("div",{className:"space-y-2 animate-fade-in",children:c.materials.map(s=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${a.material.includes(s)?"bg-[#d4af37] border-[#d4af37]":"border-gray-600 group-hover:border-[#d4af37]"}`,children:a.material.includes(s)&&e.jsx("span",{className:"material-symbols-outlined text-black text-[10px] font-bold",children:"check"})}),e.jsx("input",{type:"checkbox",className:"hidden",checked:a.material.includes(s),onChange:()=>m("material",s)}),e.jsx("span",{className:`text-sm ${a.material.includes(s)?"text-white":"text-gray-400"} group-hover:text-[#FAFAF5] transition-colors`,children:s})]},s))})]})]})}function S(c){const a=new Set;return c.forEach(m=>{const i=m.toLowerCase().trim();i.includes("10k")&&a.add("Oro 10k"),i.includes("14k")&&a.add("Oro 14k"),(i==="plata"||i.includes("silver"))&&a.add("Plata"),i.includes("tricolor")&&a.add("Tricolor")}),Array.from(a)}function M({initialProducts:c}){const[a,m]=x.useState(c),[i,y]=x.useState("featured"),[n,g]=x.useState({category:[],priceRange:"",collection:[],material:[]}),[o,b]=x.useState({min:0,max:5e3}),[f,s]=x.useState(!1),[p,k]=x.useState("");x.useEffect(()=>{const t=new URLSearchParams(window.location.search),l=t.get("productType"),r=t.get("tag");if(l||r){g(u=>({...u,category:l?[l]:[],collection:r?[r]:[]}));const d=[l,r].filter(Boolean);k(d.join(" · "))}},[]);const F=x.useMemo(()=>{const t=new Set,l=new Set,r=new Set,d=["mujer","hombre","niños","niña","regalo","bebé","bebe","unisex","pareja"];return c.forEach(u=>{u.productType&&t.add(u.productType),u.tags.forEach(w=>{const h=w.trim().toLowerCase();d.includes(h)&&l.add(w.trim()),h.includes("10k")&&r.add("Oro 10k"),h.includes("14k")&&r.add("Oro 14k"),(h==="plata"||h.includes("silver"))&&r.add("Plata"),h.includes("tricolor")&&r.add("Tricolor")})}),{categories:Array.from(t).sort(),collections:Array.from(l).sort(),materials:Array.from(r).sort()}},[c]);x.useEffect(()=>{let t=c;n.category.length>0&&(t=t.filter(l=>n.category.includes(l.productType))),n.collection.length>0&&(t=t.filter(l=>{const r=l.tags.map(d=>d.trim().toLowerCase());return n.collection.some(d=>r.includes(d.trim().toLowerCase()))})),n.material.length>0&&(t=t.filter(l=>{const r=S(l.tags);return n.material.some(d=>r.includes(d))})),(o.min>0||o.max<5e3)&&(t=t.filter(l=>{const r=parseFloat(l.priceRange.minVariantPrice.amount);return r>=o.min&&(o.max>=5e3?!0:r<=o.max)})),i==="price-low-high"?t=[...t].sort((l,r)=>parseFloat(l.priceRange.minVariantPrice.amount)-parseFloat(r.priceRange.minVariantPrice.amount)):i==="price-high-low"&&(t=[...t].sort((l,r)=>parseFloat(r.priceRange.minVariantPrice.amount)-parseFloat(l.priceRange.minVariantPrice.amount))),m(t)},[n,o,i,c]);const j=(t,l)=>{g(r=>{const d=r[t],u=d.includes(l)?d.filter(w=>w!==l):[...d,l];return{...r,[t]:u}})},v=()=>{g({category:[],priceRange:"",collection:[],material:[]}),b({min:0,max:5e3}),y("featured")},N=n.category.length>0||n.collection.length>0||n.material.length>0||o.min>0||o.max<5e3;return e.jsxs("div",{className:"w-full relative min-h-screen flex flex-col lg:flex-row gap-8 px-4 md:px-12 pt-8",children:[e.jsxs("div",{className:"lg:hidden w-full flex justify-between items-center mb-6 pb-4 border-b border-[#d4af37]/20",children:[e.jsxs("span",{className:"text-gray-400 text-xs uppercase tracking-widest",children:[a.length," Joyas"]}),e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 text-[#d4af37] font-bold text-sm uppercase tracking-widest",children:[e.jsx("span",{className:"material-symbols-outlined",children:"tune"}),"Filtros ",N&&e.jsx("span",{className:"bg-[#d4af37] text-black rounded-full w-4 h-4 text-[10px] flex items-center justify-center ml-1",children:n.category.length+n.collection.length+n.material.length})]})]}),e.jsxs("div",{className:"hidden lg:block w-64 flex-shrink-0",children:[e.jsx(C,{filters:F,selectedFilters:n,onFilterChange:j,priceRange:o,setPriceRange:b,totalProducts:c.length,filteredCount:a.length}),N&&e.jsxs("button",{onClick:v,className:"mt-4 w-full flex items-center justify-center gap-2 border border-[#d4af37]/40 text-[#d4af37] text-xs uppercase tracking-widest font-bold py-2.5 hover:bg-[#d4af37] hover:text-black transition-all duration-300 rounded-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"filter_alt_off"}),"Limpiar Filtros"]})]}),e.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden transform transition-transform duration-300 ${f?"translate-x-0":"translate-x-full"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>s(!1)}),e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-80 bg-[#0a0a0a] border-l border-[#d4af37]/20 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-[#d4af37]/10 flex-shrink-0",children:[e.jsx("h2",{className:"text-[#FAFAF5] font-serif text-xl",children:"Filtros"}),e.jsx("button",{onClick:()=>s(!1),children:e.jsx("span",{className:"material-symbols-outlined text-gray-400 hover:text-[#d4af37] transition-colors",children:"close"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(C,{filters:F,selectedFilters:n,onFilterChange:j,priceRange:o,setPriceRange:b,totalProducts:c.length,filteredCount:a.length})}),e.jsxs("div",{className:"flex-shrink-0 px-4 pt-4 pb-[84px] border-t border-[#d4af37]/10 space-y-3 bg-[#0a0a0a]",children:[e.jsxs("button",{onClick:()=>s(!1),className:"w-full bg-[#d4af37] text-black font-bold uppercase tracking-widest py-3.5 hover:bg-white transition-colors rounded-sm text-sm",children:["Ver ",a.length," Joyas"]}),N&&e.jsxs("button",{onClick:v,className:"w-full flex items-center justify-center gap-2 border border-[#d4af37]/40 text-[#d4af37] text-xs uppercase tracking-widest font-bold py-2.5 hover:bg-[#d4af37] hover:text-black transition-all duration-300 rounded-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"filter_alt_off"}),"Limpiar Filtros"]})]})]})]}),e.jsxs("div",{className:"flex-1 pb-32",children:[e.jsxs("div",{className:"hidden lg:flex flex-col gap-4 mb-8 pb-4 border-b border-[#d4af37]/10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-400 text-sm tracking-widest uppercase",children:["Mostrando ",e.jsx("span",{className:"text-[#FAFAF5]",children:a.length})," de ",c.length," Resultados"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase",children:"Ordenar:"}),e.jsxs("select",{value:i,onChange:t=>y(t.target.value),className:"bg-transparent text-[#FAFAF5] text-sm border-none focus:ring-0 cursor-pointer",children:[e.jsx("option",{value:"featured",className:"bg-black",children:"Destacado"}),e.jsx("option",{value:"price-low-high",className:"bg-black",children:"Precio: Bajo a Alto"}),e.jsx("option",{value:"price-high-low",className:"bg-black",children:"Precio: Alto a Bajo"})]})]})]}),N&&e.jsx("div",{className:"flex flex-wrap gap-2",children:[...n.category,...n.collection,...n.material].map(t=>e.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-[#d4af37]/10 border border-[#d4af37]/40 text-[#d4af37] text-xs rounded-full",children:[t,e.jsx("button",{onClick:()=>{n.category.includes(t)?j("category",t):n.collection.includes(t)?j("collection",t):j("material",t)},className:"ml-1 hover:text-white",children:"✕"})]},t))})]}),a.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-4 gap-y-10 md:gap-x-8 md:gap-y-12",children:a.map(t=>e.jsx(A,{product:t},t.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-5xl text-[#d4af37]/30 mb-4",children:"diamond"}),e.jsx("h3",{className:"text-xl font-serif text-[#FAFAF5] mb-2",children:p?"No hay productos con este estilo todavía":"Sin resultados"}),e.jsx("p",{className:"text-gray-400 mb-6 max-w-sm mx-auto text-sm",children:p?`Aún no tenemos piezas para "${p}". Estamos trabajando en traer lo mejor para ti muy pronto. ✨`:"Prueba ajustando tus filtros para encontrar lo que buscas."}),e.jsx("div",{className:"flex items-center gap-4 flex-wrap justify-center",children:e.jsx("button",{onClick:v,className:"text-[#d4af37] border-b border-[#d4af37] pb-1 hover:text-white hover:border-white transition-colors text-sm uppercase tracking-widest",children:"Ver toda la tienda"})})]})]})]})}export{M as default};
