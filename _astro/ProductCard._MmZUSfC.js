import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as h}from"./index.DiEladB3.js";import{u as y}from"./index.DIEz7UgV.js";import{t as k,f as w}from"./favorites.BAdUhc2r.js";import{a as A,s as F}from"./cart.DLN6Tch6.js";import{r as b}from"./paths.BOnPBRLc.js";function C({product:t}){const c=!!y(w)[t.id],[r,d]=h.useState(!1),[m,x]=h.useState(!1),v=t.tags?.includes("Nuevo")||t.tags?.includes("New"),f=t.totalInventory||t.variants?.edges?.[0]?.node?.quantityAvailable||0,j=f>0&&f<5,i=t.featuredImage?.url,l=t.images?.edges?.find(a=>a.node.url!==i)?.node?.url,p=t.variants?.edges?.[0]?.node?.id||t.id,s=parseFloat(t.priceRange.minVariantPrice.amount),g=t.variants?.edges?.[0]?.node?.compareAtPrice?.amount,n=g?parseFloat(g):0,o=n>s,N=o?Math.round((n-s)/n*100):0,u=async a=>{a.preventDefault(),a.stopPropagation(),x(!0),A({id:p,title:t.title,price:s,image:i,handle:t.handle,quantity:1}),setTimeout(()=>{x(!1),F(!0)},600)};return e.jsxs("article",{className:"group relative flex flex-col h-full bg-transparent transition-all duration-300",style:{animation:"fadeInUp 0.4s ease forwards"},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsxs("div",{className:"relative aspect-[4/5] overflow-hidden bg-[#111111] border border-transparent group-hover:border-[#d4af37] transition-colors duration-300",children:[e.jsxs("a",{href:b(`/producto/${t.handle}`),className:"block w-full h-full relative",children:[e.jsx("img",{src:i,alt:t.featuredImage?.altText||t.title,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out ${r&&l?"opacity-0":"opacity-100"}`,loading:"lazy"}),l&&e.jsx("img",{src:l,alt:`${t.title} - Puesto`,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out ${r?"opacity-100":"opacity-0"}`,loading:"lazy"})]}),e.jsxs("div",{className:"absolute top-0 left-0 p-3 flex flex-col gap-1 z-20",children:[v&&e.jsx("span",{className:"bg-[#d4af37] text-black text-[10px] font-sans font-bold px-2 py-1 uppercase tracking-wider",children:"Nuevo"}),j&&e.jsx("span",{className:"bg-[#d4af37] text-black text-[10px] font-sans font-bold px-2 py-1 uppercase tracking-wider",children:"Pocas Piezas"}),o&&e.jsxs("span",{className:"bg-red-600 text-white text-[10px] font-sans font-bold px-2 py-1 uppercase tracking-wider",children:["-",N,"%"]})]}),e.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),k({id:t.id,handle:t.handle,title:t.title,price:t.priceRange.minVariantPrice.amount,image:i,variantId:p})},className:"absolute top-0 right-0 p-3 z-30 group/fav","aria-label":"Agregar a favoritos",children:e.jsx("span",{className:`material-symbols-outlined text-[24px] transition-all duration-300 ${c?"filled text-[#d4af37] animate-pulse-once":"text-white group-hover/fav:text-[#d4af37]"}`,style:c?{fontVariationSettings:"'FILL' 1"}:{},children:"favorite"})}),e.jsx("div",{className:`absolute bottom-0 left-0 w-full p-4 z-20 transition-transform duration-500 ease-out hidden lg:block ${r?"translate-y-0":"translate-y-full"}`,children:e.jsx("button",{onClick:u,disabled:m,className:"w-full py-3 border border-[#d4af37] bg-black/40 backdrop-blur-sm text-[#d4af37] font-sans font-bold text-[11px] uppercase tracking-[2px] hover:bg-[#d4af37] hover:text-black transition-all duration-300 flex items-center justify-center gap-2",children:m?e.jsx("span",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Añadir Rápido"}),e.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"shopping_bag"})]})})})]}),e.jsxs("div",{className:"pt-4 flex flex-col gap-1 px-3 pb-3",children:[e.jsx("div",{className:"text-[10px] text-[#A0A0A0] uppercase tracking-widest font-medium",children:t.title.includes("10k")?"Oro 10k Garantizado":t.title.includes("18k")?"Oro 18k Garantizado":"Oro 14k Garantizado"}),e.jsx("h3",{className:"text-[#FAFAF5] font-sans font-semibold text-sm md:text-[15px] leading-tight tracking-wide line-clamp-2 h-[2.4em] mb-1",children:e.jsx("a",{href:b(`/producto/${t.handle}`),className:"hover:text-[#d4af37] transition-colors",children:t.title})}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-[#d4af37] font-serif text-lg md:text-xl",children:["$",s.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})]}),o&&e.jsxs("span",{className:"text-gray-500 text-xs line-through decoration-gray-500",children:["$",n.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})]})]}),e.jsxs("div",{className:"text-[9px] text-[#888] mt-0.5 font-light tracking-wide flex items-center gap-1",children:["o 4 pagos de $",(s/4).toLocaleString("en-US",{maximumFractionDigits:0})," con",e.jsx("span",{className:"font-bold text-gray-500",children:"Affirm"})]})]}),e.jsx("div",{className:"lg:hidden mt-3",children:e.jsx("button",{onClick:u,className:"w-full py-2.5 border border-[#d4af37]/50 text-[#d4af37] text-[10px] uppercase font-bold tracking-widest flex items-center justify-center gap-2 active:bg-[#d4af37] active:text-black transition-colors",children:"Añadir"})})]})]})}export{C as P};
