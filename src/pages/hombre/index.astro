---
import Breadcrumbs from "../../components/Breadcrumbs.astro";
import Layout from "../../layouts/Layout.astro";
import { client as shopifyClient } from "../../lib/shopify";
import { GET_PRODUCTS_BY_COLLECTION } from "../../lib/queries/products";
import ProductCard from "../../components/react/ProductCard";
import StoreGrid from "../../components/react/StoreGrid";

const seo = {
    title: "Joyas de Oro para Hombre | Cadenas y Esclavas 14k",
    description:
        "Colección Hombre: Cadenas y Esclavas de Oro Sólido. Eleva tu estatus con joyas de oro macizo. Cadenas Cubanas, esclavas y anillos de grado.",
};

let products = [];

try {
    const response = await shopifyClient.request(GET_PRODUCTS_BY_COLLECTION, {
        variables: {
            handle: "hombre",
        },
    });
    products =
        response.data?.collection?.products?.edges?.map(
            (edge: any) => edge.node,
        ) || [];
    if (products.length > 0) {
        console.log(
            "Server Trace - First Product Data:",
            JSON.stringify(products[0], null, 2),
        );
    }
} catch (error) {
    console.error("Error fetching Hombre collection:", error);
}
---

<Layout title={seo.title} description={seo.description}>
    <div class="max-w-[1920px] mx-auto pt-32 lg:pt-40">
        <div class="px-6 mb-2">
            <Breadcrumbs
                items={[{ label: "Inicio", href: "/" }, { label: "Hombre" }]}
            />
        </div>

        <div class="px-6 pb-6 text-center">
            <h1 class="main-heading">
                Colección Hombre: Cadenas y Esclavas - Oro 14k Sólido
            </h1>
            <p
                class="text-sm text-gray-400 font-light max-w-xs mx-auto leading-relaxed"
            >
                Descubre nuestra selección de cadenas, anillos y esclavas
                diseñadas para durar. Oro 14k garantizado.
            </p>
        </div>

        {
            products.length > 0 ? (
                <StoreGrid client:load initialProducts={products} />
            ) : (
                <div class="text-center py-20 px-4">
                    <p class="text-xl text-gray-500">
                        No se encontraron productos en esta colección.
                    </p>
                </div>
            )
        }
    </div>
</Layout>
